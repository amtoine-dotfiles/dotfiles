set -g prefix C-space
unbind-key C-b
bind-key C-space send-prefix

set -s escape-time 0

bind-key r source-file ~/.config/tmux/tmux.conf

bind c new-window -c "#{pane_current_path}"
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

bind -r ^ last-window
bind -r k select-pane -U
bind -r j select-pane -D
bind -r h select-pane -L
bind -r l select-pane -R

# from https://www.rockyourcode.com/copy-and-paste-in-tmux/
set-option -g mouse off
setw -g mode-keys vi
set-option -s set-clipboard off
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi t send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -se c -i'

TMUX_SESSIONIZER="~/.local/bin/tmux-sessionizer.nu"
NUSHELL_WITH_ENV="nu --env-config ~/.config/nushell/env.nu --commands"

bind-key -r H new-window "$NUSHELL_WITH_ENV '\
    use nu-git-manager gm;\
    $TMUX_SESSIONIZER (gm list --full-path)\
'"
bind-key -r N new-window "$TMUX_SESSIONIZER --new"
bind-key -r G new-window "$TMUX_SESSIONIZER --expand --switch"
bind-key -r R new-window "$TMUX_SESSIONIZER --expand --remove"
